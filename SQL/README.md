# SQL  

В этом разделе — два собранных PDF-файла по **SQL (MySQL 8+)**:

-  [**Функции_SQL.pdf**](./Функции_SQL.pdf) — мой авторский конспект по SQL.  
  По сути это сжатое описание всех моих знаний:  
  `DDL/DML`, фильтрация и агрегация, `JOIN`, подзапросы и `UNION`, даты/строки/регэкспы, переменные `@`, `CTE (WITH)` и оконные функции (`OVER()`), а также приёмы вроде «FULL OUTER JOIN через UNION».

-  [**Примеры_запросов.pdf**](./Примеры_запросов.pdf) — подборка написанных мною SQL-задач с решениями и краткими пояснениями.  
  Каждая задача оформлена в формате:  
  **База данных → Формулировка → Решение → Объяснение**.

---

## Навыки, которые демонстрирую

- Агрегации (`SUM/COUNT/MIN/MAX`), `GROUP BY/HAVING`, фильтрация и сортировка.  
- Соединения: `INNER/LEFT/RIGHT JOIN`, `USING` vs `ON`, многоступенчатые `JOIN` в `SELECT/UPDATE/DELETE`.  
- Подзапросы и объединения `UNION/UNION ALL`; эмуляция `FULL OUTER JOIN` в MySQL.  
- Работа со строками и датами: `SUBSTR/INSTR/CONCAT/REGEXP`, `FROM_UNIXTIME`, `DATEDIFF`, `MONTHNAME` и др.  
- `CTE (WITH)` и оконные функции (`ROW_NUMBER`, `RANK`, `DENSE_RANK`, `LAG`, `LEAD`, агрегаты `OVER()`).  
- Мини-ETL: создание промежуточных таблиц `CREATE TABLE … AS`, расчёт показателей и обновления с подзапросами.  

---

## Карта задач (для [Примеры_запросов.pdf](./Примеры_запросов.pdf))

| №  | Кратко                                       | Ключевые приёмы                                              |
|----|----------------------------------------------|--------------------------------------------------------------|
| 1  | Жанры-лидеры по количеству                   | `JOIN`, `GROUP BY`, `SUM`, `HAVING`                          |
| 2  | Ежемесячная выручка (2 года)                 | `UNION ALL`, `YEAR`, `MONTHNAME`, группировка по дате        |
| 3  | Студенты с максимальным результатом          | подзапрос, `ORDER BY ... DESC LIMIT 1`, `DISTINCT`           |
| 4  | Успешность вопросов                          | `LEFT JOIN`, доля `SUM(is_correct)/COUNT`, `ROUND`, `SUBSTR` |
| 5  | Таблица `applicant`                          | `CREATE TABLE … AS`, `LEFT JOIN`, суммирование по предметам  |
| 6  | Удаление не прошедших пороги                 | `DELETE … USING … JOIN`, сравнение `result` vs `min_result`  |
| 7  | Начисление бонусов                           | `UPDATE` с подзапросом, `IFNULL/IF`, `LEFT JOIN`             |
| 8  | Заполнение `step_keyword`                    | `INSERT … SELECT`, `JOIN`, `INSTR` (поиск слова)             |
| 9  | Группы по числу решённых шагов               | вложенные агрегации, `COUNT(DISTINCT)`, `CASE`               |
| 10 | Успешность шагов (0%/100%)                   | 2 `CTE`, `LEFT/RIGHT JOIN` + `UNION`, `IFNULL`               |
| 11 | Прогресс и сертификаты                       | переменная `@step_sount`, `COUNT(DISTINCT)`, `CASE`          |
| 12 | Среднее время урока                          | 3 `CTE`, фильтр `> 4 ч`, перевод секунд в часы, `ROW_NUMBER` |
| 13 | Относительный рейтинг в модуле               | `MAX() OVER (PARTITION BY)`, проценты, сортировка            |
| 14 | Детализация попыток `student_59`             | `CTE`, `DENSE_RANK`, замена «длинных» попыток, `SEC_TO_TIME` |
| 15 | Группы поведения (I/II/III), 2 варианта      | Вариант 1: `CTE+LEAD`; Вариант 2: `CTE+LAG`                  |

---

## Как читать  

-  **Быстрое освежение синтаксиса** → [Функции_SQL.pdf](./Функции_SQL.pdf) (оглавление + примеры).  
-  **Кейсы, приближённые к практике** → [Примеры_запросов.pdf](./Примеры_запросов.pdf) (каждый кейс самодостаточен: схема, запрос, объяснение).  
